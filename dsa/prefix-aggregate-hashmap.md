# Prefix Aggregate + Hashmap Pattern

This is a core pattern that describes `O(n)` solutions to [LC 560](https://leetcode.com/problems/subarray-sum-equals-k/description/) and [LC 974](https://leetcode.com/problems/subarray-sums-divisible-by-k/description/) and other problems. Here is the idea behind the pattern.

We have some sequence of values (array of nums, string, etc.) and we need to count the number of contiguous segments of the sequence that satisfy some mathematical condition involving an aggregation of the segment (for example, a prefix aggregate). We iterate through the sequence and compute the prefix aggregate for each prefix (from the start of the sequence to the current index), storing each unique prefix aggregate value in a hashmap along with the number of times it has occurred. From the current prefix aggregate, we algebraically determine what value a prior prefix aggregate must equal in order for the sub-sequence between the two indices to satisfy the required condition. Then we check how many times we have already encountered a prefix aggregate that, when combined with the current prefix aggregate according to our derived formula, produces the desired result.